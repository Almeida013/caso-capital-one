name: Infra Validation

on:
  push:
    paths:
      - '**/*.tf'

jobs:
  security_scan:
    name: Rodar tfsec e checkov
    runs-on: ubuntu-latest

    steps:
      - name: Checkout do c√≥digo
        uses: actions/checkout@v3

      - name: Rodar tfsec
        uses: aquasecurity/tfsec-action@v1.0.0

      - name: Instalar checkov
        run: pip install checkov

      - name: Rodar checkov
        run: checkov -d . --quiet --soft-fail false
